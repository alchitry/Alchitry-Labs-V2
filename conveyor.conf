include "#!./gradlew -q printConveyorConfig"
include "conveyor-local.conf"

app {
    fsname = alchitry-labs
    vendor = Alchitry
    display-name = Alchitry Labs
    vcs-url = github.com/alchitry/Alchitry-Labs-V2
    license = "GPL-3.0-only"
    description = "Write, build, and load projects for Alchitry FPGA development boards"
    contact-email = "support@alchitry.com"
    rdns-name = com.alchitry.labs

    icons = "icons/icon-*.png"

    machines = [windows.amd64, linux, mac]

    linux {
        root-inputs += install/99-alchitry.rules -> /etc/udev/rules.d/99-alchitry.rules
        symlinks += ${app.linux.prefix}/bin/alchitry -> ${app.linux.install-path}/bin/alchitry
    }

    jvm {
        cli {
            alchitry {
                main-class = com.alchitry.labs.CLIKt
            }
        }
    }

    site {
        github {
            // oauth-token = ${env.GITHUB_TOKEN} // set in conveyor-local.conf
            pages-branch = "gh-pages"
        }
    }
}

conveyor.compatibility-level = 12
app.site.consistency-checks = warn